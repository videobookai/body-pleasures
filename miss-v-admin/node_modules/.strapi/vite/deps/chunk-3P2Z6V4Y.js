import {
  pluginId,
  useSettings
} from "./chunk-HUPYWN7W.js";
import {
  useMutation,
  useQuery
} from "./chunk-USVKYBJG.js";
import {
  useAIAvailability
} from "./chunk-HN2PRP3J.js";
import {
  useFetchClient
} from "./chunk-4MGLLS3K.js";
import {
  useTracking
} from "./chunk-EJAZJHHC.js";
import {
  useNotification
} from "./chunk-WHOOYCJG.js";
import {
  useIntl
} from "./chunk-RDA6Z5PA.js";

// node_modules/@strapi/upload/dist/admin/hooks/useTracking.mjs
var useTracking2 = () => {
  const { trackUsage: trackStrapiUsage } = useTracking();
  const { data } = useSettings();
  const isAiAvailable = useAIAvailability();
  const trackUsage = (event, properties) => {
    return trackStrapiUsage(event, {
      ...properties,
      ...isAiAvailable ? {
        isAIMediaLibraryConfigured: Boolean(data == null ? void 0 : data.aiMetadata)
      } : {}
    });
  };
  return {
    trackUsage
  };
};

// node_modules/@strapi/upload/dist/admin/hooks/useConfig.mjs
var endpoint = `/${pluginId}/configuration`;
var queryKey = [
  pluginId,
  "configuration"
];
var useConfig = () => {
  const { trackUsage } = useTracking2();
  const { formatMessage } = useIntl();
  const { toggleNotification } = useNotification();
  const { get, put } = useFetchClient();
  const config = useQuery(queryKey, async () => {
    const res = await get(endpoint);
    return res.data.data;
  }, {
    onError() {
      return toggleNotification({
        type: "danger",
        message: formatMessage({
          id: "notification.error"
        })
      });
    },
    /**
    * We're cementing that we always expect an object to be returned.
    */
    select: (data) => data || {}
  });
  const putMutation = useMutation(async (body) => {
    await put(endpoint, body);
  }, {
    onSuccess() {
      trackUsage("didEditMediaLibraryConfig");
      config.refetch();
    },
    onError() {
      return toggleNotification({
        type: "danger",
        message: formatMessage({
          id: "notification.error"
        })
      });
    }
  });
  return {
    config,
    mutateConfig: putMutation
  };
};

export {
  useTracking2 as useTracking,
  useConfig
};
//# sourceMappingURL=chunk-3P2Z6V4Y.js.map
